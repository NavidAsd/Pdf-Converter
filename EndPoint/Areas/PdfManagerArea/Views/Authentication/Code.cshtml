@{
    Layout = null;
}


<head>
    <link href="~/Areas/Admin/css/login.css" rel="stylesheet" />
    <link rel="shortcut icon" type="image/png" href="~/images/logo/66-modified.png">
    <title>PdfConverter | Admin-Verification</title>
</head>

<style>
    .overlay {
        background: url("/Areas/Admin/images/we.jpg");
    }

    body {
        align-items: center;
        background-color: var(--blue);
        background: url("/Areas/Admin/images/Rowb.jpg");
        background-attachment: fixed;
        background-position: center;
        background-repeat: no-repeat;
        background-size: cover;
        display: grid;
        height: 100vh;
        place-items: center;
    }
</style>
<div class="container right-panel-active">
    <!-- Sign In -->
    <div class="container__form container--signin">
        <form action="javascript:void(0);" class="form">
            <h2 class="form__title">2-Step-Verification</h2>
            <input id="Code" type="text" placeholder="Code" class="input" />
            <p>We sent a code to your email. You have 6 minutes to login</p>
            <a style="color:blue; cursor:pointer;" onclick="resend()" class="link"><u>Resend?</u></a>
            <a href="/PdfManagerArea/Authentication/Login/">Back To Login</a>
            <button class="btn" onclick="Verify()">Done</button>
        </form>

    </div>
    <!-- Overlay -->
    <div class="container__overlay">
        <div class="overlay">
        </div>
    </div>
</div>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<link href="~/Sweetalert2/sweetalert2.min.css" rel="stylesheet" />
<script src="~/Sweetalert2/sweetalert2.min.js"></script>


<script>

    function Verify() {
        var data = {
            "Code": document.getElementById("Code").value,
        }

        $.ajax({
            contentType: 'application/x-www-form-urlencoded',
            dataType: 'json',
            type: "POST",
            url: "/PdfManagerArea/Authentication/VerifyCode/",
            data: data,
            success: function (data) {
                if (data.success == true) {
                    window.location.replace("/PdfManagerArea/Home/Index/");
                }
                else {
                    if (data.message == "qq") {
                        window.location.replace("/PdfManagerArea/Authentication/Login/");
                    } else {
                        swal.fire(
                            'warning!',
                            data.message,
                            'warning'
                        );
                    }
                }
            },
            error: function (request, status, error) {
                swal.fire(
                    'warning!',
                    request.responseText,
                    'warning'
                );
            }
        });
    }

    function resend() {
        var data = "";
        $.ajax({
            contentType: 'application/x-www-form-urlencoded',
            dataType: 'json',
            type: "POST",
            url: "/PdfManagerArea/Authentication/ResendCode/",
            data: data,

            success: function (data) {
                if (data.success == true) {
                    window.location.reload();
                }
                else {

                    swal.fire(
                        'warning!',
                        data.message,
                        'warning'
                    );
                }

            },
            error: function (request, status, error) {
                swal.fire(
                    'warning!',
                    request.responseText,
                    'warning'
                );
            }

        });
    }


    function handle(e) {
        if (e.KeyCode == 13) {
            e.preventDefault();
            Login();
        }
    }
</script>